# 写在前面
## 建议构建特色参考数据库进行扩增子分析
- 常用的数据库如iBOL, silva常年不更新，而测序序列(NCBI)每年都会增多
- NCBI上的序列每天都在增多，NCBI上的序列是最全的，应该保证数据的时效性，
- 直接用NCBI上的NT库进行注释也是可以的，但是包含了很多无关的序列，计算机运行起来会非常慢. 比如截止到2021年12月，NT库的序列文件(nt.fasta)高达160G+,而我们的Mito-COI非冗余库的序列文件(Mito-COI.fasta)只有12G
- 直接提取COI基因，用COI数据库也是可以的，但很多物种只有Mitochondria序列，参见https://github.com/BANZUIGE/Mito-COI/tree/main/venn.pdf
- 网上常见的特色库构建教程一般为根据物种类群Taxid(病毒txid:10239,寄生虫taxid：708403，古菌taxid：2157，细菌taxid：2)对NT库进行过滤，本教程与其略有不同
## 建库需具备一定的基础知识
- Linux基础，包括常用命令，软件安装、使用
- Qiime2扩增子分析流程，常用命令
- 一定的生信基础及生信文本处理技能
  可参见：https://github.com/BANZUIGE/Mito-COI/tree/main/TutorialOnHowToUseAndBuildACustomDatabase/LearningNote进行学习。
# 建库过程(思路)
  以Mito-COI建库过程为例,本文提供主要思路，可灵活运用，具体代码可逐步参见：https://github.com/BANZUIGE/Mito-COI/tree/main/TutorialOnHowToUseAndBuildACustomDatabase/LearningNote
## 目标
 - 获得一个序列文件和一个对应的分类信息文件，最终导入Qiime2中为Qiime对象文件
## 1. 获取对于数据库的序列文件（有多种方法，可根据自己具备的技能及服务器配置灵活运用）
### 1.1 先下载NT库
  截止到2021年12月，该库总共高达160G
 ## 2. 根据序列文件提取Accession ID
### 2.1 提取NT库的序列标题文件(.lab)
  根据fasta文件格式特点，用grep命令进行提取，关键词为“>”,最后得到去掉序列后序列标题，与NCBI上每条序列的标题一致一致
### 2.2 根据关键词进行搜索
  - 用grep命令进行搜索，提取
  - 如果关键词较少，如"Mitochondrion"，"Mitochondrial"，"COI"，"COX1"，可以直接搜索提取
  - 如果关键词较多，如需要建本地物种特色数据库，建议用属水平进行搜索，因为它是分类水平较低，且相对于种水平只有一个单词，这种方法所建的特色库相对较全，序列又相对较少
### 2.3 提取特色库每条序列的Accession ID
  - 需要用到Linux文本处理awk命令，提取用grep命令进行提取对应的列，逐行排列
### 2.4 去冗余
    - 检查有无冗余（重复）的行，用awk命令去冗余
## 3. 并获取每个Accession ID对应的分类信息文件

## 3. 进一步过滤，去冗余
  
